{
  "permissions": {
    "allow": [
      "Bash(npm run lint)",
      "Bash(npx tsc:*)",
      "Bash(npx kill-port:*)",
      "Bash(npm run build:*)",
      "Bash(npx prisma studio)",
      "Bash(git add:*)",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nAdd authentication to all API routes and security fixes\n\n- Add requireAuth middleware to all unprotected API routes:\n  - conversations/[id]/messages\n  - mcp/connections/[id], test, discover\n  - user/aws, user/aws/test\n  - messages/feedback\n- Add ownership verification to prevent unauthorized access\n- Remove DEMO_USER_ID from user/aws routes\n- Delete debug endpoint \\(app/api/mcp/debug/route.ts\\)\n- Add auth headers to all frontend API calls\n- Fix fetchConversations to handle 401 and redirect to login\n- Add debugging logs for conversation fetching\n- Remove hardcoded user name, use actual session user\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(git push:*)",
      "Bash(git archive:*)",
      "Bash(aws s3 cp:*)",
      "Bash(aws codebuild batch-get-builds:*)",
      "Bash(aws apprunner list-services:*)",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nFix Bedrock credentials to use IAM role in AWS\n\n- Only set explicit credentials if AWS_ACCESS_KEY_ID is provided\n- In AWS environments \\(App Runner\\), uses IAM role automatically\n- Default region changed to us-west-2\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(aws apprunner update-service --service-arn arn:aws:apprunner:us-west-2:628203515088:service/athena-mcp/89beff5b48dc4bc597e2e6f7d5b775ed --source-configuration '{\n    \"\"ImageRepository\"\": {\n      \"\"ImageIdentifier\"\": \"\"628203515088.dkr.ecr.us-west-2.amazonaws.com/athena-mcp:latest\"\",\n      \"\"ImageConfiguration\"\": {\n        \"\"Port\"\": \"\"3000\"\",\n        \"\"RuntimeEnvironmentVariables\"\": {\n          \"\"NODE_ENV\"\": \"\"production\"\",\n          \"\"HOSTNAME\"\": \"\"0.0.0.0\"\",\n          \"\"AWS_REGION\"\": \"\"us-west-2\"\",\n          \"\"AWS_ACCESS_KEY_ID\"\": \"\"AKIA42PHHXEP5FR26RBS\"\",\n          \"\"AWS_SECRET_ACCESS_KEY\"\": \"\"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\"\",\n          \"\"DATABASE_URL\"\": \"\"postgresql://neondb_owner:npg_W5NGyuRSvnP9@ep-dawn-dawn-ahtikapa-pooler.c-3.us-east-1.aws.neon.tech/neondb?sslmode=require\"\",\n          \"\"KEY_ENCRYPTION_SECRET\"\": \"\"a1b2c3d4e5f6789012345678901234567890abcdef1234567890abcdef123456\"\"\n        }\n      },\n      \"\"ImageRepositoryType\"\": \"\"ECR\"\"\n    },\n    \"\"AuthenticationConfiguration\"\": {\n      \"\"AccessRoleArn\"\": \"\"arn:aws:iam::628203515088:role/apprunner-athena-mcp-ecr-role\"\"\n    }\n  }' --region us-west-2)",
      "Bash(robocopy:*)",
      "Bash(powershell -Command:*)",
      "Bash(aws apprunner describe-service:*)",
      "Bash(aws apprunner update-service --service-arn \"arn:aws:apprunner:us-west-2:628203515088:service/athena-mcp/89beff5b48dc4bc597e2e6f7d5b775ed\" --region us-west-2 --source-configuration \"{\"\"ImageRepository\"\":{\"\"ImageIdentifier\"\":\"\"628203515088.dkr.ecr.us-west-2.amazonaws.com/athena-mcp:latest\"\",\"\"ImageConfiguration\"\":{\"\"Port\"\":\"\"3000\"\",\"\"RuntimeEnvironmentVariables\"\":{\"\"NODE_ENV\"\":\"\"production\"\",\"\"AWS_ACCESS_KEY_ID\"\":\"\"AKIAZEQ6Y5TIBMMTLUXZ\"\",\"\"AWS_SECRET_ACCESS_KEY\"\":\"\"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\"\",\"\"AWS_REGION\"\":\"\"us-west-2\"\",\"\"DATABASE_URL\"\":\"\"postgresql://postgres:AthenaPoc2025@athena-poc-db.cb0i6mi8cbg1.us-west-2.rds.amazonaws.com:5432/athenamcp\"\",\"\"KEY_ENCRYPTION_SECRET\"\":\"\"a1b2c3d4e5f6789012345678901234567890abcdef1234567890abcdef123456\"\",\"\"HOSTNAME\"\":\"\"0.0.0.0\"\"}},\"\"ImageRepositoryType\"\":\"\"ECR\"\"},\"\"AuthenticationConfiguration\"\":{\"\"AccessRoleArn\"\":\"\"arn:aws:iam::628203515088:role/apprunner-athena-mcp-ecr-role\"\"}}\" --query \"Service.Status\" --output text)",
      "WebSearch",
      "Bash(git commit:*)",
      "Bash(aws codebuild start-build:*)",
      "Bash(aws apprunner start-deployment:*)",
      "mcp__claude_ai_Athena_redshift_MCP_server__run_downtime_query"
    ]
  }
}
